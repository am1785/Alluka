{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}English Corpus Search Engine{% endblock %}</h1>
{% endblock %}

{% block content %}
<section class="searchBar">
<form id="searchForm" method="post">
    <h3>Query</h3>
    <input name="query" id="query" required>
    <input type="submit" value="Search">
  </form>
</section>

<section class="results">
    {% for result in results %}
    <article class="result">
      <header>
        <div>
          {% if loop.last %}
          <h3 class="resultCount">{{ result[0] }}</h3>
          {% endif %}
          {% if not loop.last %}
          <h3 class="resultChannel">{{ result[0] }}</h3>
          {% endif %}
        </div>
      </header>
      <p class="resultText">{{ result[1] }}</p>
      {% if not loop.last %}
      <a class="resultLink" href= {{ "https://youtu.be/" ~ result[2] ~ "?t=" ~ result[3] }}>Link to Clip</a>
      {% endif %}
    </article>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
  <hr>
  {% if pages|length < 7 %}
  {% for page in pages %}
  <a class = "btn btn-primary" href={{ url_for("search.search_corpus", q=params, page=page) }}>{{ page }}</a>
  {% endfor %}
  {% endif %}
  {% if pages|length > 6 %}
  <div class="container text-center" >
    <div class="row align-items-baseline">
      <div class="col"><a class = "btn btn-primary" href={{ url_for("search.search_corpus", q=params, page=pages[0]) }}>{{ pages[0] }}</a></div>
      <div class="col"><a class = "btn btn-primary" href={{ url_for("search.search_corpus", q=params, page=pages[1]) }}>{{ pages[1] }}</a></div>
      <div class="col justify"><form class="align-items-center" method = "POST">
        <input type="number" required name="page_no" id="pageNo" min="1" max={{ pages[-1] }} />
        <input type="hidden" name="query" value={{ params }} />
        <input type="submit" name="submit" id="pageGo" value="go" />
      </form></div>
      <div class="col"><a class = "btn btn-primary" href={{ url_for("search.search_corpus", q=params, page=pages[-2]) }}>{{ pages[-2] }}</a></div>
      <div class="col"><a class = "btn btn-primary" href={{ url_for("search.search_corpus", q=params, page=pages[-1]) }}>{{ pages[-1] }}</a></div>
    </div>
  </div>
  {% endif %}
</section>
  <!-- <span>search over 10,000 high quality video annotations</span> -->
{% endblock %}